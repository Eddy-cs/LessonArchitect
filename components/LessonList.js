import { Fragment } from "react";
import Image from "next/image";
import { Card, CardContent, Typography } from "@mui/material";
import Masonry from "@mui/lab/Masonry";
import Avatar from "@mui/material/Avatar";

function LessonList(props) {
  const list = props.lessons[0].generatedLessons.map((e) => (
    <Card key={e.timestamp}>
      <CardContent sx={{ paddingBottom: 1 }}>
        <Typography variant="h5">{e.lessonTitle}</Typography>
        <div
          style={{
            display: "grid",
            gridAutoFlow: "column",
            justifyContent: "start",
            alignItems: "center",
            gap: 10,
            paddingTop: 3,
          }}
        >
          <Avatar
            sx={{ width: 24, height: 24 }}
            src={e.user && e.user.photoURL}
          ></Avatar>
          <Typography variant="subtitle1">
            Generated by{" "}
            {props.lessons[0].displayName
              ? props.lessons[0].displayName
              : "Anonymous"}
          </Typography>
        </div>
      </CardContent>
      <CardContent>
        <Typography
          sx={{ whiteSpace: "pre-line", marginTop: -3 }}
          variant="body1"
        >
          {e.generatedLesson}
        </Typography>
      </CardContent>
    </Card>
  ));

  return (
    <Fragment>
      <Typography p={2} variant="h4">
        {props.pageTitle}
      </Typography>
      <Masonry
        defaultHeight={41000}
        defaultColumns={2}
        defaultSpacing={2}
        columns={{ xs: 1, sm: 2, md: 3 }}
        spacing={2}
      >
        {list.map((list, index) => (
          <div key={index} sx={{ list }}>
            {list}
          </div>
        ))}
      </Masonry>
    </Fragment>
  );
}

export default LessonList;
